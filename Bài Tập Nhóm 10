def safe_squares(n, rooks):
    unsafe_rows = set()
    unsafe_cols = set()
    for rook in rooks:
        unsafe_rows.add(rook[0])
        unsafe_cols.add(rook[1])
    safe_rows = n - len(unsafe_rows)
    safe_cols = n - len(unsafe_cols)
    return safe_rows * safe_cols

# Nhập dữ liệu từ bàn phím
try:
    n = int(input("Nhập kích thước bàn cờ n: "))
    if n <= 0:
        print("Kích thước bàn cờ phải là số nguyên dương!")
        exit()
    
    num_rooks = int(input("Nhập số lượng quân xe: "))
    if num_rooks < 0:
        print("Số lượng quân xe không thể âm!")
        exit()
    
    rooks = []
    print("Nhập tọa độ các quân xe (hàng cột), mỗi quân xe trên một dòng:")
    for i in range(num_rooks):
        while True:
            try:
                line = input(f"Quân xe {i+1}: ").strip()
                # Xử lý đầu vào có thể là: "2,3" hoặc "2 3" hoặc "(2,3)"
                line = line.replace('(', '').replace(')', '').replace(',', ' ')
                parts = line.split()
                if len(parts) != 2:
                    print("Vui lòng nhập đúng định dạng: hàng cột (hoặc hàng,cột)")
                    continue
                row = int(parts[0])
                col = int(parts[1])
                
                # Kiểm tra tọa độ có hợp lệ không
                if row < 0 or row >= n or col < 0 or col >= n:
                    print(f"Tọa độ phải nằm trong phạm vi từ 0 đến {n-1}")
                    continue
                    
                rooks.append((row, col))
                break
            except ValueError:
                print("Vui lòng nhập số nguyên hợp lệ!")
    
    # Tính toán và in kết quả
    result = safe_squares(n, rooks)
    print(f"\nSố ô an toàn trên bàn cờ {n}x{n}: {result}")

except ValueError:
    print("Vui lòng nhập số nguyên hợp lệ!")
